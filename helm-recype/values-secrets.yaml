# Helm Values - Secrets Configuration
# This file contains sensitive values for Helm deployments
# DO NOT COMMIT THIS FILE - Add to .gitignore

replicaCount: 1

image:
  repository: edygc1988/ms_payments
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

container:
  port: 8000

# Database Secrets
postgres:
  user: postgres
  password: ${DB_PASSWD}
  database: payments_db
  port: 5432

# API Secrets
api:
  password: ${API_PASSWD}
  port: 8000

# Environment Variables
env:
  - name: DB_PASSWD
    valueFrom:
      secretKeyRef:
        name: ms-payments-secret
        key: db-password
  - name: API_PASSWD
    valueFrom:
      secretKeyRef:
        name: ms-payments-secret
        key: api-password
  - name: DATABASE_URL
    value: "postgresql://postgres:${DB_PASSWD}@postgresql:5432/payments_db"

# Secrets Configuration
secrets:
  create: true
  name: ms-payments-secret
  data:
    db-password: ${DB_PASSWD}
    api-password: ${API_PASSWD}

resources:
  requests:
    cpu: "250m"
    memory: "250Mi"
  limits:
    cpu: "1"
    memory: "250Mi"

probes:
  startup:
    path: /startup
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  liveness:
    path: /liveness
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  readiness:
    path: /readiness
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1

hpa:
  enabled: true
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80

persistence:
  enabled: true
  size: 8Gi
  storageClass: ""

nodeSelector: {}
tolerations: []
affinity: {}
