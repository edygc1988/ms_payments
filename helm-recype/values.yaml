replicaCount: 1

image:
  repository: edygc1988/ms_payments
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

container:
  port: 8000

# Database Configuration (External PostgreSQL)
database:
  host: "mi-postgres-primary.default.svc.cluster.local"
  port: 5432
  name: "miapp"
  user: "miapp_user"
  password: "MiPasswordApp123" # Override with GitHub Secret

# API Configuration
api:
  password: "APi_PASSWD" # Override with GitHub Secret
  port: 8000

resources:
  requests:
    cpu: "250m"
    memory: "250Mi"
  limits:
    cpu: "1"
    memory: "250Mi"

probes:
  startup:
    path: /startup
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  liveness:
    path: /liveness
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  readiness:
    path: /readiness
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1

hpa:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

# Kubernetes secrets
secret:
  create: true
  name: ms-payments-secrets

# Environment variables for the application
env:
  - name: DB_HOST
    value: "postgresql.default.svc.cluster.local"
  - name: DB_PORT
    value: "5432"
  - name: DB_NAME
    value: "payments_db"
  - name: DB_USER
    value: "postgres"
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: ms-payments-secrets
        key: db-password
  - name: API_PASSWORD
    valueFrom:
      secretKeyRef:
        name: ms-payments-secrets
        key: api-password
  - name: DATABASE_URL
    value: "postgresql://postgres@postgresql.default.svc.cluster.local:5432/payments_db"

deploymentName: ms-payments
namespace: ""
